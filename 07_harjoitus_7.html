<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<!-- Based on TemplateMo 553 Xtra Blog: https://templatemo.com/tm-553-xtra-blog -->

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="8 Harjoitus 7: Paikkatietoanalyysit | Johdanto QGISin käyttöön - Harjoitukset" />
<meta property="og:type" content="book" />





<meta name="author" content="Gispo Ltd." />

<meta name="date" content="2022-06-01" />


<meta name="description" content="8 Harjoitus 7: Paikkatietoanalyysit | Johdanto QGISin käyttöön - Harjoitukset">

<title>8 Harjoitus 7: Paikkatietoanalyysit | Johdanto QGISin käyttöön - Harjoitukset</title>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>



<link rel="stylesheet" href="custom.css" type="text/css" />

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/hamburgers.css" rel="stylesheet">

</head>

<body>


<div class="main-content">
<!-- special comment to mark beginning of title section for bookdown -->
<!-- bookdown comments must be in this order: title, toc, body -->

<div class="main-content-wrapper">

<div class="row">
<div class="col-sm-12">
<header class="main-toc sidebar" id="sidebar">
<div class="sidebar-wrapper">

<button class="navbar-toggle hamburger hamburger--collapse" id="navbar-toggle"
type="button" onclick="navToggle()" aria-label="Toggle navigation">
<span class="hamburger-box"><span class="hamburger-inner"></span></span>
</button>

<div class="sidebar-title-wrapper">
<img alt="Logo" width="100" src="img/gispo_white_sm.png" class="sidebar-logo">
<div class="sidebar-title"><h1>Johdanto QGISin käyttöön - Harjoitukset</h1></div>
<div class="abstract-sidebar"><p>Peruskurssi QGIS-ohjelmiston perusteisiin</p></div>
</div>

<nav class="sidebar-nav">
<div id="TOC" class="toc">
<ul>
<li><a href="index.html#johdanto-qgisin-käyttöön"><span class="toc-section-number">1</span> Johdanto QGISin käyttöön</a></li>
<li><a href="01_harjoitus_1.html#harjoitus-1-qgisin-käyttöliittymä"><span class="toc-section-number">2</span> Harjoitus 1: QGISin käyttöliittymä</a>
<ul>
<li><a href="01_harjoitus_1.html#kurssimateriaalien-lataus"><span class="toc-section-number">2.1</span> Kurssimateriaalien lataus</a></li>
<li><a href="01_harjoitus_1.html#qgisin-käyttöliittymä"><span class="toc-section-number">2.2</span> QGISin käyttöliittymä</a></li>
<li><a href="01_harjoitus_1.html#qgis-käyttöliittymän-osat"><span class="toc-section-number">2.3</span> QGIS-käyttöliittymän osat</a></li>
<li><a href="01_harjoitus_1.html#kokeile-itse"><span class="toc-section-number">2.4</span> Kokeile itse</a>
<ul>
<li><a href="01_harjoitus_1.html#attribuuttitaulu"><span class="toc-section-number">2.4.1</span> Attribuuttitaulu</a></li>
</ul></li>
</ul></li>
<li><a href="02_harjoitus_2.html#harjoitus-2-paikkatietoaineistot-ja--palvelut"><span class="toc-section-number">3</span> Harjoitus 2: Paikkatietoaineistot ja -palvelut</a>
<ul>
<li><a href="02_harjoitus_2.html#harjoituksen-sisältö"><span class="toc-section-number">3.1</span> Harjoituksen sisältö</a></li>
<li><a href="02_harjoitus_2.html#harjoituksen-tavoite"><span class="toc-section-number">3.2</span> Harjoituksen tavoite</a></li>
<li><a href="02_harjoitus_2.html#valmistautuminen"><span class="toc-section-number">3.3</span> Valmistautuminen</a></li>
<li><a href="02_harjoitus_2.html#wms-palvelun-lisääminen"><span class="toc-section-number">3.4</span> WMS-palvelun lisääminen</a></li>
<li><a href="02_harjoitus_2.html#wfs-palvelun-lisääminen"><span class="toc-section-number">3.5</span> WFS-palvelun lisääminen</a></li>
<li><a href="02_harjoitus_2.html#lisätehtävä-wfs-rajapintapalvelun-kysely-ja-suodatus-sql-lausekkeella"><span class="toc-section-number">3.6</span> Lisätehtävä: WFS-rajapintapalvelun kysely ja suodatus SQL-lausekkeella</a></li>
</ul></li>
<li><a href="03_harjoitus_3.html#harjoitus-3-paikkatietoaineiston-visualisointi"><span class="toc-section-number">4</span> Harjoitus 3: Paikkatietoaineiston visualisointi</a>
<ul>
<li><a href="03_harjoitus_3.html#harjoituksen-sisältö-1"><span class="toc-section-number">4.1</span> Harjoituksen sisältö</a></li>
<li><a href="03_harjoitus_3.html#harjoituksen-tavoite-1"><span class="toc-section-number">4.2</span> Harjoituksen tavoite</a></li>
<li><a href="03_harjoitus_3.html#valmistautuminen-1"><span class="toc-section-number">4.3</span> Valmistautuminen</a></li>
<li><a href="03_harjoitus_3.html#vektoriaineistojen-visualisointi"><span class="toc-section-number">4.4</span> Vektoriaineistojen visualisointi</a></li>
<li><a href="03_harjoitus_3.html#monikulmioaineiston-edistynyt-visualisointi"><span class="toc-section-number">4.5</span> Monikulmioaineiston edistynyt visualisointi</a></li>
<li><a href="03_harjoitus_3.html#rasteriaineistojen-visualisointi"><span class="toc-section-number">4.6</span> Rasteriaineistojen visualisointi</a></li>
</ul></li>
<li><a href="04_harjoitus_4.html#harjoitus-4-paikkatietoaineiston-nimiöinti-ja-luokittelu"><span class="toc-section-number">5</span> Harjoitus 4: Paikkatietoaineiston nimiöinti ja luokittelu</a>
<ul>
<li><a href="04_harjoitus_4.html#harjoituksen-sisältö-2"><span class="toc-section-number">5.1</span> Harjoituksen sisältö</a></li>
<li><a href="04_harjoitus_4.html#harjoituksen-tavoite-2"><span class="toc-section-number">5.2</span> Harjoituksen tavoite</a></li>
<li><a href="04_harjoitus_4.html#valmistautuminen-2"><span class="toc-section-number">5.3</span> Valmistautuminen</a></li>
<li><a href="04_harjoitus_4.html#nimiöt"><span class="toc-section-number">5.4</span> Nimiöt</a></li>
<li><a href="04_harjoitus_4.html#nimiöiden-tyyli--ja-yleisasetukset"><span class="toc-section-number">5.5</span> Nimiöiden tyyli- ja yleisasetukset</a></li>
<li><a href="04_harjoitus_4.html#nimiön-tekstityyli"><span class="toc-section-number">5.6</span> Nimiön tekstityyli</a></li>
<li><a href="04_harjoitus_4.html#nimiöinnit-viivatasoilla"><span class="toc-section-number">5.7</span> Nimiöinnit viivatasoilla</a></li>
<li><a href="04_harjoitus_4.html#vektoriaineiston-luokittelut"><span class="toc-section-number">5.8</span> Vektoriaineiston luokittelut</a></li>
<li><a href="04_harjoitus_4.html#rasteriaineiston-luokittelut"><span class="toc-section-number">5.9</span> Rasteriaineiston luokittelut</a></li>
<li><a href="04_harjoitus_4.html#lisätehtävä-nimiöiden-piirtäminen"><span class="toc-section-number">5.10</span> Lisätehtävä: nimiöiden piirtäminen</a></li>
</ul></li>
<li><a href="05_harjoitus_5.html#harjoitus-5-karttatuloste"><span class="toc-section-number">6</span> Harjoitus 5: Karttatuloste</a>
<ul>
<li><a href="05_harjoitus_5.html#harjoituksen-sisältö-3"><span class="toc-section-number">6.1</span> Harjoituksen sisältö</a></li>
<li><a href="05_harjoitus_5.html#harjoituksen-tavoite-3"><span class="toc-section-number">6.2</span> Harjoituksen tavoite</a></li>
<li><a href="05_harjoitus_5.html#valmistautuminen-3"><span class="toc-section-number">6.3</span> Valmistautuminen</a></li>
<li><a href="05_harjoitus_5.html#karttatuloste"><span class="toc-section-number">6.4</span> Karttatuloste</a></li>
<li><a href="05_harjoitus_5.html#lisätehtävä-kartta-atlas"><span class="toc-section-number">6.5</span> Lisätehtävä: kartta-atlas</a></li>
</ul></li>
<li><a href="06_harjoitus_6.html#harjoitus-6-paikkatietoaineiston-editointi"><span class="toc-section-number">7</span> Harjoitus 6: Paikkatietoaineiston editointi</a>
<ul>
<li><a href="06_harjoitus_6.html#harjoituksen-sisältö-4"><span class="toc-section-number">7.1</span> Harjoituksen sisältö</a></li>
<li><a href="06_harjoitus_6.html#harjoituksen-tavoite-4"><span class="toc-section-number">7.2</span> Harjoituksen tavoite</a></li>
<li><a href="06_harjoitus_6.html#valmistautuminen-4"><span class="toc-section-number">7.3</span> Valmistautuminen</a></li>
<li><a href="06_harjoitus_6.html#vektoriaineiston-geopackage-luominen"><span class="toc-section-number">7.4</span> Vektoriaineiston (GeoPackage) luominen</a></li>
<li><a href="06_harjoitus_6.html#digitoitavan-tason-tietorakenne"><span class="toc-section-number">7.5</span> Digitoitavan tason tietorakenne</a></li>
<li><a href="06_harjoitus_6.html#pohjakartan-lisääminen"><span class="toc-section-number">7.6</span> Pohjakartan lisääminen</a></li>
<li><a href="06_harjoitus_6.html#digitoinnin-aloittaminen"><span class="toc-section-number">7.7</span> Digitoinnin aloittaminen</a></li>
<li><a href="06_harjoitus_6.html#lisätehtävä-cad-digitointi"><span class="toc-section-number">7.8</span> Lisätehtävä: CAD-digitointi</a></li>
<li><a href="06_harjoitus_6.html#lisätehtävä-ominaisuustietojen-lisääminen"><span class="toc-section-number">7.9</span> Lisätehtävä: ominaisuustietojen lisääminen</a></li>
</ul></li>
<li><a href="07_harjoitus_7.html#harjoitus-7-paikkatietoanalyysit"><span class="toc-section-number">8</span> Harjoitus 7: Paikkatietoanalyysit</a>
<ul>
<li><a href="07_harjoitus_7.html#harjoituksen-sisältö-5"><span class="toc-section-number">8.1</span> Harjoituksen sisältö</a></li>
<li><a href="07_harjoitus_7.html#harjoituksen-tavoite-5"><span class="toc-section-number">8.2</span> Harjoituksen tavoite</a></li>
<li><a href="07_harjoitus_7.html#valmistautuminen-5"><span class="toc-section-number">8.3</span> Valmistautuminen</a></li>
<li><a href="07_harjoitus_7.html#vektorianalyysit"><span class="toc-section-number">8.4</span> Vektorianalyysit</a></li>
<li><a href="07_harjoitus_7.html#lisätehtävä-ominaisuustietojen-lisääminen-ja-tarkastelu"><span class="toc-section-number">8.5</span> Lisätehtävä: ominaisuustietojen lisääminen ja tarkastelu</a></li>
</ul></li>
<li><a href="08_harjoitus_8.html#harjoitus-8-qgisin-lisäosat"><span class="toc-section-number">9</span> Harjoitus 8: QGISin lisäosat</a>
<ul>
<li><a href="08_harjoitus_8.html#harjoituksen-sisältö-6"><span class="toc-section-number">9.1</span> Harjoituksen sisältö</a></li>
<li><a href="08_harjoitus_8.html#harjoituksen-tavoite-6"><span class="toc-section-number">9.2</span> Harjoituksen tavoite</a></li>
<li><a href="08_harjoitus_8.html#valmistautuminen-6"><span class="toc-section-number">9.3</span> Valmistautuminen</a></li>
<li><a href="08_harjoitus_8.html#lisäosien-hallinta"><span class="toc-section-number">9.4</span> Lisäosien hallinta</a></li>
<li><a href="08_harjoitus_8.html#quickmapservices"><span class="toc-section-number">9.5</span> QuickMapServices</a></li>
<li><a href="08_harjoitus_8.html#qgis2threejs"><span class="toc-section-number">9.6</span> Qgis2threejs</a></li>
<li><a href="08_harjoitus_8.html#qgis2web"><span class="toc-section-number">9.7</span> Qgis2web</a></li>
</ul></li>
</ul>
</div>
</nav>
</div>
</header>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="harjoitus-7-paikkatietoanalyysit" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Harjoitus 7: Paikkatietoanalyysit</h1>
<div id="harjoituksen-sisältö-5" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Harjoituksen sisältö</h2>
<p>Harjoituksessa tutustutaan QGISin erilaisiin paikkatietoanalyyseihin.</p>
</div>
<div id="harjoituksen-tavoite-5" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Harjoituksen tavoite</h2>
<p>Koulutettava oppii käyttämään eri aineistoille tarkoitettuja paikkatietoanalyysejä tarkoituksenmukaisesti.</p>
</div>
<div id="valmistautuminen-5" class="section level2" number="8.3">
<h2><span class="header-section-number">8.3</span> Valmistautuminen</h2>
<p>Luo uusi QGIS-projekti ja tallenna se nimellä (<strong>Projekti → Tallenna nimellä…) “QGIS_harjoitus_7”</strong>.
Lisää projektiin seuraavat tasot:</p>
<ul>
<li><p><strong>…/kurssihakemisto/Tilastokeskus/kunnat2017/kunta1000k_2017.gpkg</strong></p></li>
<li><p><strong>…/kurssihakemisto/MML/YK_1M/TieViiva.shp</strong></p></li>
</ul>
<p>Voit asettaa kunnat-monikulmion täytevärin pois ja saada siten tieviiva-aineiston paremmin näkyviin:</p>
<p><img src="img/harjoitus_7/image14.gif" /></p>
<p>Karttanäkymä näyttää nyt kunkin väriasetuksia lukuunottamatta tältä:</p>
<p><img src="img/harjoitus_7/image4.png" /></p>
<p>Voit tarkistaa/muokata projektisi koordinaattijärjestelmän asetuksia <strong>Projekti → Ominaisuudet → Koordinaattijärjestelmä</strong> -välilehdessä tai klikkaamalla oikeasta alareunasta:</p>
<p><img src="img/harjoitus_7/image2.png" /></p>
<p>Kummatkin tavat avaavat projektin koordinaattijärjestelmän määrityslomakkeen. Tarkista, että järjestelmä on ETRS89 / ETRS-TM35FIN.
Muista, että voit lisätä ongelmitta projektiisi aineistoja eri karttaprojektioissa. Monet analyysityökalut eivät kuitenkaan toimi, jos analyysin lähtöaineistot eivät ole samassa koordinaattijärjestelmässä.</p>
<p>Huomautus GK-koordinaatiston EPSG-koodeista!
Suomalaiset koordinaattijärjestelmät (vanhat ja uudet) ovat pääosin hyvin tuettuina QGIS-ohjelmistossa. On kuitenkin huomautettava, että EPSG-määrittelyissä on lievää epäjohdonmukaisuutta. Esimerkiksi tarkemmat GK-koordinaattijärjestelmän koodit löytyvät EPSG:n luettelosta kahteen kertaan: EPSG:3126 – EPSG:3138 koodeilla löytyvät koordinaattijärjestelmät ETRS-GK19FIN - ETRS-GK31FIN. Nämä ovat kuitenkin ”virheellisiä”, keskimeridiaanin koordinaatti on aina 500 000.</p>
<p>OIKEAT EPSG-koodit: EPSG:3873 - EPSG:3885</p>
<p>VIRHEELLISET EPSG-koodit: EPSG:3126 - EPSG:3138</p>
</div>
<div id="vektorianalyysit" class="section level2" number="8.4">
<h2><span class="header-section-number">8.4</span> Vektorianalyysit</h2>
<p>Tässä harjoituksessa on tarkoitus etsiä ne kunnat, joiden alueella kulkee suomalainen versio kuuluisasta Route 66 -tiestä. Lyhyesti harjoituksen kulku on seuraava:
- Valitaan tieaineistosta ne tieviivat, joiden numero on 66
- Tehdään spatiaalinen analyysi kunta- ja tieviiva-aineiston kanssa, jonka myötä viiva-aineisto saa kunta-aineiston sisältämät tiedot
- Yhdistetään tieviivat kunnan nimen avulla</p>
<p>Monista <strong>TieViiva taso</strong> hiiren oikealla näppäimellä aukeavasta valikosta <strong>Monista taso</strong> vaihda uuden tason nimeksi <em>Finnish Route 66</em>:ksi samasta valikosta <strong>Nimeä taso</strong>.
Samasta valikosta löytyy myös <strong>Suodata</strong> -toiminto, joka määrittelee, mitä aineiston kohteita tämä taso käyttää.</p>
<p>Kirjoita <strong>Suodattimena käytettävä lauseke</strong> -kenttään ”Tienumero” = 66. Saat kentän nimen suoraan lausekkeeseen <strong>Tietokentät</strong>-kohdasta tuplaklikkaamalla ja <strong>Operaattorit</strong>-kuvakkeita klikkaamalla. Kun painat OK, karttanäkymässä näkyy enää suodattimen läpäisevät kohteet.</p>
<p><img src="img/harjoitus_7/image6.png" /></p>
<p>Seuraavaksi lähdemme käsittelemään aineistoja <strong>Vektori</strong>-ylämenusta, josta löytyvät ensisijaiset työkalut vektorianalyysien toteuttamiseen:</p>
<p><img src="img/harjoitus_7/image10.png" /></p>
<p>Käynnistä <strong>Ristiinleikkaus (intersection…)</strong>-työkalu <strong>Geoprosessointi</strong>-valikosta. Määrittele leikattavaksi tasoksi tiestöaineisto ja leikkaavaksi tasoksi kuntaraja-aineisto:</p>
<p><img src="img/harjoitus_7/image1.png" /></p>
<p>Suorita analyysi painamalla Suorita ja paina sen jälkeen <strong>Sulje</strong>. Analyysi luo uuden väliaikaisen tulostason nimeltä <strong>Ristiinleikkaus (intersection)</strong>.
Karttaikkunassa aineisto näyttää samalta kuin alkuperäinen aineisto. Vertaile tasojen (<strong>Finnish Route 66</strong> ja <strong>Ristiinleikkaus (intersection)</strong>) ominaisuustietoja. Mitä huomaat?
Seuraavaksi voit visualisoida syntyneen tulostason tieviivat kunkin kunnan osalta eri välillä: määrittele kuvaustekniikka luokittelemalla tiestö kunnan nimen perusteella käyttäen kenttää Nimi.
Aktivoi <strong>Näytä kohteiden lukumäärä</strong> -toiminto (paina hiiren oikealla näppäimellä tason nimen päällä Tasoluettelossa).</p>
<p><img src="img/harjoitus_7/image12.gif" /></p>
<p>Tasoluettelossa luokittelun pitäisi näyttää suunnilleen seuraavalta (värit ja viivojen paksuus on sen mukainen kuin olet määritellyt):</p>
<p><img src="img/harjoitus_7/image13.png" /></p>
<p>Seuraavaksi voimme yhdistää erilliset tieviivat <strong>Sulauta</strong>-työkalun (Dissolve) avulla. Valitse työkalu <strong>Vektori-Geoprosessointi → Sulauta</strong>. Sulauta tieviivat kunnan nimen (tai numeron) perusteella ja tallenna lopputulos kurssihakemistoon haluamallasi nimellä (esimerkiksi kunta_sulautettu.shp). Täytä asetukset Sulauta-ikkunassa kuvan mukaisesti:</p>
<p><img src="img/harjoitus_7/image5.png" /></p>
<p>Paina <strong>Suorita</strong> ja sitten <strong>Sulje</strong>.
Voit kopioida aiemmin luodun tason tyylin helposti uudelle aineistoille. Valitse hiiren oikealla näppäimellä avautuvasta valikosta <strong>Tyyli → Kopioi tyyli</strong>. Valitse äsken luotu taso ja <strong>Tyyli → Liitä tyyli</strong>. Kun laitat vielä kohteiden lukumäärän näkyviin, niin lopputuloksen pitäisi tasoluettelossa olla seuraava:</p>
<p><img src="img/harjoitus_7/image11.png" /></p>
<p>Lopuksi voimme laskea, kuinka pitkä pätkä tietä nro. 66 osuu kunkin kunnan alueelle. Avaa ominaisuustietotaulukko ja käytä <strong>Kentän arvojen laskin</strong>-työkalua. Luo uusi kenttä, jossa on kunkin tieviivan pituus hyödyntämällä <strong>Geometria</strong>-ryhmästä <strong>$length</strong>-funktiota.</p>
<p><img src="img/harjoitus_7/image7.png" /></p>
<div class="note-box">
<p><strong>Psst! Muista tallentaa QGIS-projekti harjoituksen lopuksi.</strong></p>
</div>
</div>
<div id="lisätehtävä-ominaisuustietojen-lisääminen-ja-tarkastelu" class="section level2" number="8.5">
<h2><span class="header-section-number">8.5</span> Lisätehtävä: ominaisuustietojen lisääminen ja tarkastelu</h2>
<p>Voidaan vielä laskea, kuinka suuri osa suhteellisesti (osuus koko pituudesta) tietä nro. 66 osuu kunkin kunnan alueelle. Prosenttilaskun toimittamiseksi tarvitset tiedon tiesegmenttien yhteenlasketusta kokonaispituudesta eli summasta, jonka saat käyttöösi Kenttien tilastolliset tunnusluvut -työkalun avulla: avaa yläpalkista <strong>Prosessointi → Työkalut</strong> ja kirjoita etsi hakukentän avulla työkalu <strong>Kenttien tilastolliset tunnusluvut</strong>.</p>
<p><img src="img/harjoitus_7/image3.png" /></p>
<p>Anna avautuvassa ikkunassa kentäksi, josta tilastot lasketaan, edellisessä tehtävässä laskemasi pituus-kenttä:
Prosenttilasku tehdään samalla tavalla kuin pituuden tai pinta-alan laskenta eli tehdään uusi sarake, jonka kohteille lasketaan arvot seuraavan funktion avulla (heittomerkkien sisään jäävä sana/merkkijono viittaa sarakkeen nimeen ja ‘summa’ laskemaasi arvoon):</p>
<p>(“Pituus” / summa)<code>*100</code></p>
<p>Lopuksi voit visualisoida kartalle kunkin kunnan osuuden haluamallasi tavalla.</p>

</div>
</div>
<p style="text-align: center;">
<a href="06_harjoitus_6.html"><button class="btn btn-default">Previous</button></a>
<a href="08_harjoitus_8.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>

<footer class="footer text-center">

<div class="footer-container text-center">

<div class="footer-info">
<h5 class="footer-title">Johdanto QGISin käyttöön - Harjoitukset</h5>
<span class="footer-version">v2022-06-01</span>
<div class="license"><img src="img/by-nd.svg" width="80px" alt="CC-BY-ND"></div>
</div>

<div class="footer-info">
<h5 class="footer-title footer-company">Gispo Ltd.
<span class="footer-copyright-year">© 2022</span></h5>
<span class="footer-contact-info">Kalevankatu 31
<br>00100 Helsinki, Finland
<br>info@gispo.fi
</span>
</div>

</div>
</div>
</footer>
</div>


<script src="js/nav-script.js"></script>

</body>
</html>
